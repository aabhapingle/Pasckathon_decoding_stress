<!DOCTYPE html>
<html>
<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<title>ML PROJECT</title>
</head>
<body>
	<H1>----Predict your stress level----</H1>
	<h2>
		Please answer the following questions: <br><br>
		All the questions are YES/NO questions. <br><br>
		YES == 1 and NO == 0 <br><br>
	</h2>


	<form action="{{ url_for('predict')}}", method="post" id = "f1">
		<H3>'Q1-Participated in Societies and Interest Groups':<br></H3>
		<input type="radio" id = "_00" name = "0" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_01" name = "0" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>

		<H3>'Q2-Participated in Clubs':<br></H3>
		<input type="radio" id = "_10" name = "1" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_11" name = "1" value = 0 onclick = func(name,value)>
		<label for="no">No</label><br>
		
		<H3>'Q3-Interested in Arts & Culture':</H3>
		<input type="radio" id = "_20" name = "2" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_21" name = "2" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q4-Interested in Science & Technology'</H3>
		<input type="radio" id = "_30" name = "3" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_31" name = "3" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q5-Interested in Sports'</H3>
		<input type="radio" id = "_40" name = "4" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_41" name = "4" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q6-Passionate about Animal welfare'</H3>
		<input type="radio" id = "_50" name = "5" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_51" name = "5" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q7-Passionate about Health/Well-being (e.g mental health)'</H3>
		<input type="radio" id = "_60" name = "6" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_61" name = "6" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q8-Stressed about Adjustment issues'</H3>
		<input type="radio" id = "_70" name = "7" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_71" name = "7" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q9-Stressed about Academic issues'</H3>
		<input type="radio" id = "_80" name = "8" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_81" name = "8" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q10-Stressed about Financial issues'</H3>
		<input type="radio" id = "_90" name = "9" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_91" name = "9" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q11-Stressed about Family issues'</H3>
		<input type="radio" id = "_100" name = "10" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_101" name = "10" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q12-Stressed about Friendships'</H3>
		<input type="radio" id = "_110" name = "11" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_111" name = "11" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>

		<H3>'Q13-Stressed about Romantic relationships'</H3>
		<input type="radio" id = "_120" name = "12" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_121" name = "12" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q14-Stressed about  Health related issues'</H3>
		<input type="radio" id = "_130" name = "13" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_131" name = "13" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q15-Stressed about Career related issues'</H3>
		<input type="radio" id = "_140" name = "14" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_141" name = "14" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>


		<H3>'Q16-Stressed about My involvement in hostel, clubs, societies, interest groups, etc.'</H3>
		<input type="radio" id = "_150" name = "15" value = 1 onclick = func(name,value)>
        <label for="yes">Yes</label><br>
        <input type="radio" id = "_151" name = "15" value = 0 onclick = func(name,value)>
        <label for="no">No</label><br>
				<br>
				<br>

		<button type="submit" onclick="f_submitted" id = "predict">Predict</button>

	</form>

	<br>
	<br>

	{{prediction_text}}

	<script>
		var form = document.getElementById("f1");
    function handleForm(event) { event.preventDefault(); } 
    form.addEventListener('submit', handleForm);

    const f_submitted = () => {
        console.log(obj)
    }

    let obj = {}
    const func = (n, v) => {
        obj[n] = parseInt(v)
		return console.log(Object.values(obj))
    }
		$(document).ready(function () {
			$("#predict").on("click", function() {
				var js_data = JSON.stringify(func());
				$.ajax({                        
					url: '/predict',
					type : 'post',
					contentType: 'application/json',
					dataType : 'json',
					data : js_data
				}).done(function(result) {
					console.log(result);
					$("#data").html(result);
				}).fail(function(jqXHR, textStatus, errorThrown) {
					console.log("fail: ",textStatus, errorThrown);
				});
			});
		});
	</script>
</body>
</html>

<!-- <html>
    <head>
        <title>Flask Ajax</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </head>
    <body>
        <div id="data"></div>       
        <button id="demo_btn">Dummy button</button>
        <script>
            function getVals(){
                  a = ["ab", "cd"];
                  return a;
            }
            $(document).ready(function () {
                $("#demo_btn").on("click", function() {
                    var js_data = JSON.stringify(getVals());
                    $.ajax({                        
                        url: '/end_stu_live_session',
                        type : 'post',
                        contentType: 'application/json',
                        dataType : 'json',
                        data : js_data
                    }).done(function(result) {
                        console.log(result);
                        $("#data").html(result);
                    }).fail(function(jqXHR, textStatus, errorThrown) {
                        console.log("fail: ",textStatus, errorThrown);
                    });
                });
            });
        </script>       
    </body>
</html>

from flask import Flask, render_template, request, jsonify

app = Flask(__name__)

@app.route('/end_stu_live_session',methods=["GET", "POST"])
def end_stu_live_session():
    if request.method == 'POST':
        data = request.json
        return jsonify(data)
    return render_template("home.html")

app.run(debug=True) -->